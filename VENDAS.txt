Aluno: Akira Saito  		CÃ³d.: 831474

1)

a)
CREATE TABLESPACE "VENDA831474"
DATAFILE 'C:\app\akira\product\18.0.0\oradata\XE\venda831474.dbf'
SIZE 10M;

b)
ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;

CREATE USER "831474VENDA"
IDENTIFIED BY "1234"
DEFAULT TABLESPACE "VENDA831474"
TEMPORARY TABLESPACE TEMP
PROFILE DEFAULT;

c)
GRANT CREATE SESSION, SELECT ANY TABLE, CREATE TABLE TO "831474VENDA";
GRANT DBA TO "831474VENDA";

d)
CREATE TABLE CLIENTE(
codigo_cliente NUMBER,
nome VARCHAR2(35) NOT NULL,
CPF_CNPJ VARCHAR2(14) NOT NULL,
endereco VARCHAR2(30),
bairro VARCHAR2(20),
cidade VARCHAR(30),
uf CHAR(2),
CONSTRAINT PK_CLIENTE PRIMARY KEY(codigo_cliente )
);

CREATE TABLE VENDA(
num_venda NUMBER,
data_venda DATE,
codigo_cliente NUMBER,
data_entrega DATE,
CONSTRAINT PK_VENDA PRIMARY KEY(num_venda ),
CONSTRAINT FK_VENDA_CLIENTE FOREIGN KEY (codigo_cliente ) REFERENCES CLIENTE
);

CREATE TABLE PRODUTO(
codigo_produto NUMBER,
descricao_produto VARCHAR2(30),
valor_produto NUMBER(6,2),
saldo NUMBER(4),
CONSTRAINT PK_PRODUTO PRIMARY KEY(codigo_produto)
);

CREATE TABLE ITEM_VENDA(
num_item NUMBER,
num_venda NUMBER,
codigo_produto NUMBER,
qtd_venda NUMBER,
valor_produto NUMBER(6,2),
CONSTRAINT PK_ITEM_VENDA PRIMARY KEY(num_item, num_venda),
CONSTRAINT FK_ITEM_VENDA_VENDA FOREIGN KEY (num_venda) REFERENCES VENDA,
CONSTRAINT FK_ITEM_VENDA_VENDA_COD FOREIGN KEY (codigo_produto) REFERENCES VENDA
);

2)

a)
DECLARE
VNOME VARCHAR2(30);
VDATA DATA;

BEGIN
SELECT nome, TRUNC (MONTHS_BETWEEN(SYSDATE, data_venda ) /12)
INTO VNOME FROM CLIENTE WHERE nome = &VCODIGO;
INTO VDATA FROM VENDA WHERE COD_PACIENTE = &VCODIGO;
IF(VDATA == julho/2021) THAN
	VNOME := nome;
END IF;
DBMS_OUTPUT.PUT_LINE('NOME: ' || VNOME);
DBMS_OUTPUT.PUT_LINE('DATA: ' || VDATA);
EXCEPTION
WHEN OTHERS THEN
DBMS_OUTPUT.PUT_LINE('registro nao encontrado ou erro na execucao...');
END;
